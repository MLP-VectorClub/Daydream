<div class="pagination-wrapper" *ngIf="data">
  <ng-container *appVar="status === s.LOAD as loading">
    <ul class="pagination" *ngIf="items.length > 0">
      <li *ngFor="let item of items">
        <ng-container *ngIf="item.pageNumber === null; else nonNavigator">
          <button [ngbPopover]="goto" (shown)="displayPopover(true)" (hidden)="displayPopover(false)">{{item.label}}</button>
        </ng-container>
        <ng-template #nonNavigator>
          <button class="btn btn-primary" *appVar="loading && lastPressedPage === item.pageNumber as selfLoading"
            [disabled]="item.pageNumber === data.currentPage" (click)="pageChange(item.pageNumber)">
            <span class="spinner-border spinner-border-sm" *ngIf="selfLoading"></span>
            {{ selfLoading ? '' : item.label}}
          </button>
        </ng-template>
      </li>
    </ul>
  </ng-container>
</div>

<ng-template #goto>
  <form [formGroup]="jumpForm" (submit)="jumpSubmit()" class="jump-to-form">
    {{'GLOBAL.PAGINATION.JUMP_TO' | translate}}:
    <input type="number" formControlName="page" min="1" max="data.totalPages">
    <button class="btn btn-primary" *appVar="status === s.LOAD as loading">
      <span class="spinner-border spinner-border-sm" *ngIf="loading"></span>
      <i *ngIf="!loading" class="fa fa-step-forward"></i>
    </button>
  </form>
</ng-template>
